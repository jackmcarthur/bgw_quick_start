## Convergence parameters for all systems
*These parameters all vary by system, and convergence should always be tested for novel systems. See the literature and the [tutorial worshop slides](https://workshop.berkeleygw.org/tutorial-workshop/about) for more guidance.*
There is both new and old literature benchmarking GW convergence parameters for different systems; two examples are [this recent work](https://www.nature.com/articles/s41524-024-01311-9) which converges the parameters below for many bulk semiconductors, and [this work](https://pubs.acs.org/doi/full/10.1021/acs.jctc.5b00453) which does the same for the "GW100" set of molecules.
* **Screened Coulomb (G-vector) cutoff for the dielectric matrix/self-energy calculation**: Typical values for ~50 meV accuracy for simple sp semiconductors (without semicore states) are 15-20 Ry. For systems with semicore electrons or d/f electrons, the converged value can be as high as 40-50 Ry.
* **Number of unoccupied bands in the dielectric matrix summation/Coulomb-hole summation**: This scales as the number of atoms in your unit cell, making it hard to give ballpark values, but it is generally larger when atoms with semicore electrons or d/f electrons are present. For silicon (2 atoms in unit cell), 100 bands are necessary for ~50 meV accuracy. For simple transition metal oxides, 1000+ bands are needed with 3000+ in the most pathological cases. `Epsilon` and `Sigma` can be sped up enormously if you compress the unoccupied bands in the `WFN` file with Stochastic Pseudobands, included with BerkeleyGW.
* **k-grid size**: Typical calculations involve one coarse k/q-grid used in `Epsilon`, `Sigma`, and `Kernel`, and a fine grid used only in `Absorption`. Both of these need to be converged w.r.t. density.
  * It is hard to estimate the k-grid size that a GW calculation will need a priori, since it will depend on unit cell size (larger unit cell = less dense grid), system-dependent screening, and how strongly the $\Sigma$ operator varies in k-space.
  * Coarse k-grid (`Epsilon`, `Sigma`, `Kernel`):
    * QP energies of simple bulk (3D) semiconductors (Si, GaN...) often converge somewhere between 4x4x4 and 8x8x8.
    * Simple metals may require 12x12x12 to 20x20x20+ to resolve the Fermi surface.
    * 2D/1D materials may require very dense k-grids due to the complex screening behavior (see tutorial workshop and literature); the NNS method is recommended as it can allow for convergence around 12x12x1 k-grid sizes where 200x200x1+ would be necessary without.
  * Fine k-grid (`Absorption`)
    * For accurate exciton binding energies, fine k-grids need to be dense enough to resolve the exciton wavefunction in reciprocal space. Very spread out, Wannier-type excitons are very localized in reciprocal space and require dense k-grids or even patched sampling. Frenkel excitons are delocalized in reciprocal space and may converge with k-grids close to those above.
    * To improve convergence, we strongly recommend using a *shifted* fine k-grid (random shift in each direction so that the grid center is not the $\Gamma$ point). We do this because a $\Gamma$ centered grid will generally sample many k-points related by symmetry, which can cause spikes in the density of states.
      * Shifted k-grids can be generated using the `k-shift` line in `kgrid.inp`, which is `--kshift 0.35 0.12 0.62` (with three random values between zero and one) for `data-file2kgrid.py`.
* **Number of valence and conduction bands used to solve the BSE**
  * Exciton binding energies converge as a function of how many bands are included in `number_val_bands_fine` and `number_cond_bands_fine` in `Absorption`; the same numbers of bands plus a few extra for interpolation should be used in `Kernel`.
  * Generally, to converge the absorption spectrum up to a certain energy threshhold, say 4 eV, you should include all bands that fall in a 4 eV window centered at the Fermi energy plus a few more. Note that many more bands may be necessary for molecules.

